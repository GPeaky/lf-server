const FuelPoints = [
    {
        name: "Chamberlain Hill",
        blip: {
            name: "Chamberlain Hill Gas Station",
            coords:{ x: -319.61,y: -1471.46,z: 30.12 },
            sprite: 361,
            color: 29            
        },
        points: [
            { x: -332.02, y: -1472.96, z: 29.55 },
            { x: -327.06, y: -1481.84, z: 29.55 },
            { x: -322.78, y: -1479.21, z: 29.55 },
            { x: -327.78, y: -1470.52, z: 29.55 },
            { x: -324.29, y: -1468.46, z: 29.55 },
            { x: -319.01, y: -1477.18, z: 29.55 },
            { x: -315.33, y: -1474.97, z: 29.55 },
            { x: -320.19, y: -1466.09, z: 29.55 },
            { x: -316.59, y: -1463.98, z: 29.54 },
            { x: -311.44, y: -1472.88, z: 29.55 },
            { x: -308.18, y: -1470.71, z: 29.55 },
            { x: -313.11, y: -1462.13, z: 29.54 }
        ]
    }, {
        name: 'Little Seoul',
        blip: {
            name: 'Little Seoul Gas Station',
            coords: { x: -525.61, y: -1211.15, z: 17.18 },
            sprite: 361,
            color: 29
        }, 
        points: [
            { x: -526.03, y: -1202.65, z: 17.25 },
            { x: -519.01, y: -1206.16, z: 17.26 },
            { x: -528.49, y: -1207.96, z: 17.18 },
            { x: -520.85, y: -1211.29, z: 17.18 },
            { x: -522.41, y: -1214.14, z: 17.18 },
            { x: -529.88, y: -1210.67, z: 17.18 },
            { x: -532.42, y: -1215.37, z: 17.23 },
            { x: -524.85, y: -1218.73, z: 17.22 }
        ]
    }, {
        name: 'Ginger Street',
        blip: {
            name: 'Ginger Street Gas Station',
            coords: { x: -724.110, y: -934.750, z: 19.39 },
            sprite: 361,
            color: 29
        },
        points: [
            { x: -712.340, y: -939.440, z: 18.02 },
            { x: -712.430, y: -932.760, z: 18.02 },
            { x: -718.300, y: -939.460, z: 18.02 },
            { x: -718.340, y: -932.710, z: 18.02 },
            { x: -721.320, y: -932.580, z: 18.02 },
            { x: -721.240, y: -939.050, z: 18.02 },
            { x: -726.920, y: -939.500, z: 18.02 },
            { x: -727.000, y: -932.540, z: 18.02 },
            { x: -730.280, y: -932.200, z: 18.02 },
            { x: -730.180, y: -938.530, z: 18.02 },
            { x: -735.090, y: -939.700, z: 18.02 },
            { x: -735.070, y: -932.870, z: 18.02 }
        ]
    }, {
        name: 'Morningwood',
        blip: {
            name: 'Morningwood Gas Station',
            coords: {x: -1437.290, y: -275.570, z: 45.21 },
            sprite: 361,
            color: 29
        },
        points: [
            { x: -1427.330, y: -277.580, z: 44.58 },
            { x: -1436.510, y: -267.380, z: 44.58 },
            { x: -1446.110, y: -275.820, z: 44.59 },
            { x: -1437.290, y: -286.110, z: 44.56 },
            { x: -1430.830, y: -280.680, z: 44.58 },
            { x: -1439.810, y: -270.620, z: 44.58 },
            { x: -1442.940, y: -272.920, z: 44.59 },
            { x: -1433.830, y: -283.290, z: 44.58 }
        ]
    }, {
        name: 'Strawberry',
        blip: {
            name: 'Strawberry Gas Station',
            coords: { x: 266.03, y: -1262.43, z: 28.22 },
            sprite: 361,
            color: 29
        },
        points: [
            { x: 276.09, y: -1268.89, z: 27.54 },
            { x: 276.34, y: -1262.18, z: 27.54 },
            { x: 276.25, y: -1254.19, z: 27.53 },
            { x: 271.48, y: -1253.13, z: 27.51 },
            { x: 271.52, y: -1261.19, z: 27.51 },
            { x: 271.5, y: -1267.99, z: 27.51 },
            { x: 267.43, y: -1268.63, z: 27.52 },
            { x: 267.46, y: -1261.23, z: 27.51 },
            { x: 267.56, y: -1253.33, z: 27.51 },
            { x: 262.73, y: -1253.24, z: 27.51 },
            { x: 262.73, y: -1261.09, z: 27.51 },
            { x: 262.76, y: -1268.57, z: 27.51 },
            { x: 258.85, y: -1268.63, z: 27.51 },
            { x: 259.07, y: -1261.39, z: 27.51 },
            { x: 259.04, y: -1253.37, z: 27.51 },
            { x: 253.8, y: -1253.38, z: 27.57 },
            { x: 253.91, y: -1261.18, z: 27.51 },
            { x: 253.88, y: -1268.61, z: 27.52 }
        ]
    }, {
        name: 'Grove Street',
        blip: {
            name: 'Grove Street Gas Station',
            coords: { x: -72.72, y: -1760.99, z: 27.82 },
            sprite: 361,
            color: 29
        },
        points: [
            { x: -79.54, y: -1754.05, z: 27.95 },
            { x: -82.11, y: -1761.35, z: 27.99 },
            { x: -78.04, y: -1763.13, z: 27.94 },
            { x: -75.47, y: -1756.04, z: 27.97 },
            { x: -71.64, y: -1757.04, z: 27.83 },
            { x: -74.15, y: -1764.36, z: 27.79 },
            { x: -69.77, y: -1765.94, z: 27.71 },
            { x: -67.08, y: -1758.87, z: 27.72 },
            { x: -63.03, y: -1759.84, z: 27.53 },
            { x: -65.75, y: -1766.85, z: 27.53 },
            { x: -61.32, y: -1768.91, z: 27.43 },
            { x: -58.6, y: -1761.88, z: 27.42 }
        ]
    }, {
        name: 'Mirror Park',
        blip: {
          name: 'Mirror Park Gas Station',
          coords: { x: 1180.59, y: -330.13, z: 68.33 },
          sprite: 361,
          color: 29
        },
        points: [
          { x: 1182.66, y: -318.57, z: 67.54 },
          { x: 1175.2, y: -319.87, z: 67.54 },
          { x: 1183.98, y: -323.22, z: 67.54 },
          { x: 1176.2, y: -324.66, z: 67.54 },
          { x: 1184.57, y: -327.15, z: 67.54 },
          { x: 1177.1, y: -328.52, z: 67.54 },
          { x: 1185.21, y: -332, z: 67.54 },
          { x: 1177.89, y: -333.55, z: 67.55 },
          { x: 1185.97, y: -335.85, z: 67.54 },
          { x: 1178.46, y: -337.02, z: 67.55 },
          { x: 1186.96, y: -340.71, z: 67.54 },
          { x: 1179.44, y: -342, z: 67.55 }
        ]
    },  {
        name: 'Olympic fwy',
        blip: {
          name: 'Olympic fwy Gas Station',
          coords: { x: 818.91, y: -1029.31, z: 25.4 },
          sprite: 361,
          color: 29
        },
        points: [
          { x: 808.2, y: -1026.35, z: 24.6 },
          { x: 808.06, y: -1030.94, z: 24.64 },
          { x: 812.66, y: -1026.37, z: 24.61 },
          { x: 812.82, y: -1030.93, z: 24.67 },
          { x: 816.96, y: -1026.2, z: 24.63 },
          { x: 816.95, y: -1030.73, z: 24.66 },
          { x: 820.69, y: -1026.25, z: 24.63 },
          { x: 820.94, y: -1030.75, z: 24.66 },
          { x: 825.25, y: -1026.33, z: 24.73 },
          { x: 825.22, y: -1030.85, z: 24.76 },
          { x: 829.12, y: -1026, z: 25 },
          { x: 829.41, y: -1030.88, z: 25.04 }
        ]
    }, {
        name: 'Downtown Vinewood',
        blip: {
          name: 'Downtown Vinewood Gas Station',
          coords: { x: 620.75, y: 268.57, z: 101.46 },
          sprite: 361,
          color: 29
        },
        points: [
          { x: 627.54, y: 263.96, z: 101.46 },
          { x: 627.53, y: 273.74, z: 101.46 },
          { x: 631.62, y: 273.87, z: 101.46 },
          { x: 631.65, y: 263.94, z: 101.46 },
          { x: 623.16, y: 263.99, z: 101.46 },
          { x: 623.3, y: 273.84, z: 101.46 },
          { x: 619.04, y: 263.83, z: 101.46 },
          { x: 619.05, y: 273.75, z: 101.46 },
          { x: 614.48, y: 263.92, z: 101.46 },
          { x: 614.57, y: 273.78, z: 101.46 },
          { x: 610.5, y: 264.02, z: 101.46 },
          { x: 610.37, y: 273.43, z: 101.46 }
        ]
    }, {
        name: 'Richman Glen',
        blip: {
          name: 'Richman Glen Gas Station',
          coords: { x: -1798.5, y: 802.21, z: 136.95 },
          sprite: 361,
          color: 29
        },
        points: [
          { x: -1810.51, y: 798.07, z: 136.88 },
          { x: -1805.6, y: 792.54, z: 136.88 },
          { x: -1807.17, y: 801.73, z: 136.88 },
          { x: -1801.95, y: 796.09, z: 136.88 },
          { x: -1804.25, y: 804.58, z: 136.88 },
          { x: -1799.02, y: 798.81, z: 136.88 },
          { x: -1800.66, y: 807.88, z: 136.88 },
          { x: -1795.4, y: 802.3, z: 136.88 },
          { x: -1797.73, y: 810.28, z: 136.88 },
          { x: -1792.84, y: 804.77, z: 136.88 },
          { x: -1794.2, y: 813.62, z: 136.88 },
          { x: -1788.98, y: 808.22, z: 136.88 }
        ]
    }, {
        name: 'Lago zancudo',
        blip: {
          name: 'Lago zancudo Gas Station',
          coords: { x: -2555.03, y: 2334.3, z: 31.58 },
          sprite: 361,
          color: 29
        },
        points: [
          { x: -2551.16, y: 2324.86, z: 31.439999999999998 },
          { x: -2557.76, y: 2324.29, z: 31.43 },
          { x: -2551.65, y: 2329.56, z: 31.43 },
          { x: -2558.34, y: 2329.23, z: 31.43 },
          { x: -2552.48, y: 2332.11, z: 31.43 },
          { x: -2558.09, y: 2331.76, z: 31.43 },
          { x: -2552.76, y: 2337.05, z: 31.43 },
          { x: -2559.03, y: 2336.61, z: 31.43 },
          { x: -2552.17, y: 2339.54, z: 31.43 },
          { x: -2558.64, y: 2339.17, z: 31.43 },
          { x: -2552.51, y: 2344.64, z: 31.43 },
          { x: -2559.1, y: 2344.13, z: 31.43 }
        ]
      }
]

const pricePerLiter = 1.5

const Init = () => {
    FuelPoints.forEach(( { points, blip } ) => {
        new mp.core.Blips(blip)
        points.forEach(point => {
            const colshape = mp.colshapes.newRectangle(point.x, point.y, 3, 3, 0)
        
            function playerEnterColshapeHandler(player, shape) {
                if(shape == colshape) {
                    player.call("shop:fuel:enter", [point])
                }
            }
            
            mp.events.add("playerEnterColshape", playerEnterColshapeHandler);

            
            function playerExitColshapeHandler(player, shape) {
                if(shape == colshape) {
                    player.call("shop:fuel:exit", [point])
                }
            }
            
            mp.events.add("playerExitColshape", playerExitColshapeHandler);
        })
    })
}

mp.events.addProc("shop:fuel:refuel", (player, fuel) => {
    console.log(player.vehicle.fuel)
    const {vehicle} = player
    if(vehicle == null) return {err: 'not_in_vehicle'}

    //TODO: Check if player has enough money
    const toPay = fuel * pricePerLiter
    const playerMoney = 99999
    if(toPay > playerMoney) return {err: 'not_enough_money'}

    if (vehicle.fuel + fuel > 100) return {err: 'full_fuel'}

    vehicle.fuel += fuel
    return {pay: toPay}
});

Init()